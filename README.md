Описание решения:

Решение реализовано через псевдокод, все лежит в одном контроллере, в
реальности настройки пользователя бы хранились в сервисном слое
+ использовались бы средства самого фреймворка для правил аутентификации пользователя (Guards)

слой нотификации (в нем будет три варианта- почта, sms, email) 

public function via($notifiable)
{
    return $notifiable->prefers_sms ? ['smsСервис'] : ['mail', 'database'];
}

структура БД
таблицы: User, VerificationCode, UserSettings
+ отдельно для очередей SmsQueque (как пример, в коде не использовалось)


  
